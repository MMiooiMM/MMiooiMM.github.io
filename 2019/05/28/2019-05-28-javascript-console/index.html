<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="你好，我是米歐，歡迎來到我的部落格:)"><meta property="og:title" content="MMiooiMM"><meta property="og:description" content="你好，我是米歐，歡迎來到我的部落格:)"><meta property="og:image" content="https://raw.githubusercontent.com/MMiooiMM/MMiooiMM.github.io/master/images/VeryImportantFile.jpg"><title>JS Console 小筆記 | MMiooiMM</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="/css/mio.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 4.2.1"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></div><div class="post-time">2019-05-28</div></div></div><div class="container post-header"><h1>JS Console 小筆記</h1></div><div class="container post-content"><p>感覺一段時間沒有寫文章了，剛好昨天看 <a href="https://www.youtube.com/watch?v=sWBSxMVMbjc" target="_blank" rel="noopener">Alex 直播</a>時，發現很有趣的內容，所以這邊紀錄一下。</p>
<h2 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h2><p>前端開發時的偵錯工具之一，在瀏覽器按下 <code>F12</code> 就可以找到該功能，藉由 <code>window</code> 物件裡的 <code>console</code> 物件用來操作。</p>
<p>在介紹前，因為主控台的內容是給開發人員用的，產品發佈後原則上是不留內容的，這牽扯的很多就不贅述了，所以在使用時建議自己實作一個 <code>console</code> 使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">console</span> = &#123;</span><br><span class="line">  isDev: <span class="literal">true</span>,</span><br><span class="line">  log: <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isDev) &#123;</span><br><span class="line">      <span class="built_in">window</span>.console.log(<span class="string">'== MIO LOG =='</span>);</span><br><span class="line">      <span class="built_in">window</span>.console.log(...args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>物件內容大致如上，產品發佈前將 <code>isDev</code> 改為 <code>false</code> 即可，不需要將開發過程中的 log 一一拿掉，也可以透過相關套件幫忙，自由選擇。</p>
<h3 id="log-vs-dir"><a href="#log-vs-dir" class="headerlink" title="log vs dir"></a>log vs dir</h3><ul>
<li><p>console.log prints the element in an HTML-like tree</p>
</li>
<li><p>console.dir prints the element in a JSON-like tree</p>
</li>
</ul>
<p>可以按下 <code>F12</code> 直接在這個畫面看差別。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wrapper = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'wrapper'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">console</span>.log(wrapper);</span><br><span class="line"><span class="built_in">console</span>.dir(wrapper);</span><br></pre></td></tr></table></figure>

<h3 id="log-vs-info"><a href="#log-vs-info" class="headerlink" title="log vs info"></a>log vs info</h3><p>info 對於 chrome 瀏覽器來說似乎與 log 一模一樣，而 firefox 瀏覽器則會出現符號(log 則沒有符號)。</p>
<h3 id="info-warn-error"><a href="#info-warn-error" class="headerlink" title="info, warn, error"></a>info, warn, error</h3><p>表達 log 層級</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.info(<span class="string">'info'</span>);</span><br><span class="line"><span class="built_in">console</span>.warn(<span class="string">'warn'</span>);</span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">'error'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><p>通常是用在物件陣列上，使物件陣列以表格方式呈現在主控台上。</p>
<p>也可以加入屬性名稱陣列，來篩選內容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dogs = [&#123;</span><br><span class="line">  name: <span class="string">'Snickers'</span>,</span><br><span class="line">  age: <span class="number">2</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: <span class="string">'hugo'</span>,</span><br><span class="line">  age: <span class="number">8</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">console</span>.table(dogs);</span><br><span class="line"><span class="built_in">console</span>.table(dogs, [<span class="string">'name'</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="time-timeEnd"><a href="#time-timeEnd" class="headerlink" title="time, timeEnd"></a>time, timeEnd</h3><p>計算相同參數的經歷時間，由 time 開始 timeEnd 結束。</p>
<p>這裡開始才是本文重點，Alex 拋出了一些問題，如果讀者有興趣也可以參與，請問哪個測試案例較快？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">'test 1'</span>);</span><br><span class="line"><span class="keyword">let</span> i1;</span><br><span class="line"><span class="keyword">let</span> j1;</span><br><span class="line"><span class="keyword">for</span> (i1 = <span class="number">1</span>; i1 &lt;= <span class="number">10000000</span>; i1++) &#123;</span><br><span class="line">  j1 = i1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'test 1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'test 2'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i2 = <span class="number">1</span>; i2 &lt;= <span class="number">10000000</span>; i2++) &#123;</span><br><span class="line">  <span class="keyword">let</span> j2 = i2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'test 2'</span>);</span><br></pre></td></tr></table></figure>

<p>可以看到有個 test 速度較另一個慢快三倍，那速度差異如此之大是因為 i 還是 j 的關係？</p>
<p>答案是都不是最主要的原因，個人推測是修改全域變數造成的，底層邏輯我也不是很清楚，如果有其他答案也歡迎留言分享。</p>
<p>讓我們將測試用 scope 包起來再執行一次。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'test 1'</span>);</span><br><span class="line">  <span class="keyword">let</span> i1;</span><br><span class="line">  <span class="keyword">let</span> j1;</span><br><span class="line">  <span class="keyword">for</span> (i1 = <span class="number">1</span>; i1 &lt;= <span class="number">10000000</span>; i1++) &#123;</span><br><span class="line">    j1 = i1;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'test 1'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'test 2'</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i2 = <span class="number">1</span>; i2 &lt;= <span class="number">10000000</span>; i2++) &#123;</span><br><span class="line">    <span class="keyword">let</span> j2 = i2;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'test 2'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跑 1 千萬次的時間差不到一毫秒，是幾乎可以忽略的程度，說明了把程式碼包起來有多重要。</p>
<p>還有一個測試案例為陣列填值與讀取測試。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'test ary1'</span>)</span><br><span class="line">  <span class="keyword">let</span> ary1 = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">    ary1.push(i);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ary1.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> j = item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'test ary1'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'test ary2'</span>)</span><br><span class="line">  <span class="keyword">let</span> ary2 = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">    ary2.push(&#123;</span><br><span class="line">      count: i</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ary2.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> j = item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'test ary2'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'test ary3'</span>)</span><br><span class="line">  <span class="keyword">let</span> ary3 = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">    ary3.push(i % <span class="number">2</span> ? i : &#123;</span><br><span class="line">      count: i</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ary3.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> j = item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'test ary3'</span>)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>這部分我不曉得發生甚麼事情了，我三個測試案例幾乎一樣速度，不像 Alex 實測時， array 內容如果不統一則會大幅下降速度。</p>
<p>當然還有很多 console 方法可以自己在去 MDN 觀看。</p>
<p>參考資料<br><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Console" target="_blank" rel="noopener">Console - Web APIs  MDN</a></p>
</div></div><div class="post-main post-comment"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'mio-blog';
var disqus_identifier = '2019/05/28/2019-05-28-javascript-console/';
var disqus_title = 'JS Console 小筆記';
var disqus_url = 'http://yoursite.com/2019/05/28/2019-05-28-javascript-console/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" target="_blank" rel="noopener" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-156431110-1');ga('send','pageview');</script></body></html>